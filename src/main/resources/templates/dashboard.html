<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>VaultCore Financial | Dashboard</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Segoe UI, Arial
        }

        body {
            min-height: 100vh;
            background: url("/images/dash.jpg") center/cover fixed no-repeat;
        }

        .layout {
            display: flex;
            min-height: 100vh;
            background: rgba(246, 249, 252, .88)
        }

        .sidebar {
            width: 240px;
            background: #0f172a;
            color: #fff;
            padding: 24px 18px;
            position: fixed;
            top: 0;
            bottom: 0
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 32px
        }

        .menu {
            list-style: none
        }

        .menu li {
            margin-bottom: 14px
        }

        .menu a {
            display: block;
            padding: 12px 14px;
            border-radius: 10px;
            color: #cbd5f5;
            text-decoration: none
        }

        .menu a:hover {
            background: #1e293b;
            color: #fff
        }

        .logout {
            color: #f87171 !important
        }

        .main-content {
            margin-left: 240px;
            width: calc(100% - 240px);
            padding: 28px
        }

        .card {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #e2e8f0;
            margin-bottom: 28px
        }

        .subtitle {
            font-size: 14px;
            color: #64748b
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 18px;
            margin-top: 24px
        }

        .info-box {
            padding: 20px;
            border-radius: 14px;
            border: 1px solid #e2e8f0;
            background: #fff
        }

        .primary-btn {
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            border: none;
            background: linear-gradient(135deg, #6366f1, #4f46e5);
            color: #fff;
            font-weight: 700;
            cursor: pointer
        }

        .hidden {
            display: none
        }

        /* SHARED FORM UI */
        .send-wrapper {
            max-width: 820px;
            margin: auto;
            background: linear-gradient(135deg, #eef2ff, #f8fbff);
            border-radius: 22px;
            padding: 28px
        }

        .send-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 22px
        }

        .secure-pill {
            background: #dcfce7;
            color: #15803d;
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 600
        }

        .inner-card {
            background: #fff;
            border-radius: 18px;
            padding: 26px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, .08)
        }

        .field {
            margin-bottom: 18px
        }

        .field label {
            font-weight: 600;
            font-size: 14px
        }

        .field input,
        .field select {
            width: 100%;
            padding: 14px;
            margin-top: 6px;
            border-radius: 12px;
            border: 1px solid #e5e7eb
        }

        .amount-pills {
            display: flex;
            gap: 12px;
            margin-bottom: 14px
        }

        .amount-pills button {
            flex: 1;
            padding: 12px;
            border-radius: 14px;
            border: 1px solid #e5e7eb;
            background: #f8fafc;
            font-weight: 600;
            cursor: pointer
        }

        /* STEPPER */
        .stepper {
            display: flex;
            align-items: center;
            margin: 26px 0
        }

        .step-dot {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700
        }

        .step-dot.active {
            background: #6366f1;
            color: #fff;
            box-shadow: 0 0 0 6px rgba(99, 102, 241, .15)
        }

        .step-line {
            flex: 1;
            height: 4px;
            background: #e5e7eb
        }

        .step-line.active {
            background: #6366f1
        }

        .summary-box {
            background: #eef2ff;
            border-radius: 16px;
            padding: 20px
        }

        .summary-box div {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px
        }

        .success {
            text-align: center
        }

        .success-icon {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            background: #dcfce7;
            color: #16a34a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 46px;
            margin: 0 auto 16px
        }
    </style>
</head>

<body>

    <div class="layout">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <h2>VaultCore</h2>
            <ul class="menu">
                <li><a href="#" onclick="showDashboard()">Dashboard</a></li>
                <li><a href="#" onclick="showSendMoney()">Send Money</a></li>
                <li><a href="#" onclick="showHistory()">History</a></li>
                <li><a href="#" onclick="showAddMoney()">Add Money</a></li>
                <li><a th:href="@{/logout}" class="logout">Logout</a></li>
            </ul>
        </aside>

        <!-- MAIN CONTENT -->
        <div class="main-content">

            <marquee>
                ðŸ”” Welcome <span th:text="${username} ?: 'User'"></span> | Secure Banking
            </marquee>

            <!-- DASHBOARD -->
            <div id="dashboardSection" class="card">
                <h3>Dashboard Overview</h3>
                <p class="subtitle">Manage your accounts securely</p>

                <div class="info-grid">
                    <div class="info-box">
                        Balance<br><br>
                        <strong id="balanceText">â‚¹45000</strong>
                    </div>
                    <div class="info-box">
                        ðŸ’¸ Transfers<br><br>
                        Instant & Secure
                    </div>
                    <div class="info-box">
                        ðŸ”’ Security<br><br>
                        ACID Compliant
                    </div>
                </div>
            </div>

            <!-- SEND MONEY (3 STEPS) -->
            <div id="sendMoneySection" class="card hidden">
                <div class="send-wrapper">

                    <div class="send-header">
                        <h2>Send Money</h2>
                        <span class="secure-pill">ðŸ”’ ACID Compliant</span>
                    </div>

                    <div class="stepper">
                        <div id="s1" class="step-dot active">1</div>
                        <div id="l1" class="step-line active"></div>
                        <div id="s2" class="step-dot">2</div>
                        <div id="l2" class="step-line"></div>
                        <div id="s3" class="step-dot">3</div>
                    </div>

                    <!-- STEP 1 -->
                    <div id="step1" class="inner-card">
                        <h3>Transfer Details</h3><br>

                        <div class="field">
                            <label>From Account</label>
                            <select id="fromAcc">
                                <option value="">Select account</option>
                                <option>Savings â€¢ ****1234</option>
                                <option>Current â€¢ ****5678</option>
                            </select>
                        </div>

                        <div class="field">
                            <label>To Account / UPI</label>
                            <input id="toAcc">
                        </div>

                        <div class="field">
                            <label>Amount</label>
                            <input id="amount" type="number">
                        </div>

                        <div class="amount-pills">
                            <button onclick="setAmt(1000)">â‚¹1,000</button>
                            <button onclick="setAmt(5000)">â‚¹5,000</button>
                            <button onclick="setAmt(10000)">â‚¹10,000</button>
                        </div>

                        <button class="primary-btn" onclick="goStep2()">
                            Review Transfer
                        </button>
                    </div>

                    <!-- STEP 2 -->
                    <div id="step2" class="inner-card hidden">
                        <h3>Confirm Transfer</h3><br>

                        <div class="summary-box">
                            <div><span>From</span><strong id="cFrom"></strong></div>
                            <div><span>To</span><strong id="cTo"></strong></div>
                            <div><span>Amount</span><strong id="cAmt"></strong></div>
                            <div><span>Fee</span><strong>â‚¹10</strong></div>
                            <hr>
                            <div><span>Total Debit</span><strong id="cTotal"></strong></div>
                        </div>

                        <button class="primary-btn" onclick="goStep3()">
                            Confirm & Send
                        </button>
                    </div>

                    <!-- STEP 3 -->
                    <div id="step3" class="inner-card hidden success">
                        <div class="success-icon">âœ“</div>
                        <h3>Transfer Successful</h3>
                        <p id="txnId"></p>
                        <button class="primary-btn" onclick="showDashboard()">
                            Go to Dashboard
                        </button>
                    </div>

                </div>
            </div>

            <!-- ADD MONEY -->
            <div id="addMoneySection" class="card hidden">
                <div class="send-wrapper">

                    <div class="send-header">
                        <h2>Add Money</h2>
                        <span class="secure-pill">ðŸ’³ Instant</span>
                    </div>

                    <div id="addForm" class="inner-card">
                        <div class="field">
                            <label>Amount</label>
                            <input id="addAmount" type="number">
                        </div>

                        <div class="amount-pills">
                            <button onclick="setAddAmt(1000)">â‚¹1,000</button>
                            <button onclick="setAddAmt(5000)">â‚¹5,000</button>
                            <button onclick="setAddAmt(10000)">â‚¹10,000</button>
                        </div>

                        <button class="primary-btn" onclick="confirmAddMoney()">
                            Add Money
                        </button>
                    </div>

                    <div id="addSuccess" class="inner-card hidden success">
                        <div class="success-icon">âœ“</div>
                        <h3>Money Added Successfully</h3>
                        <p id="addTxn"></p>
                        <button class="primary-btn" onclick="showDashboard()">
                            Go to Dashboard
                        </button>
                    </div>

                </div>
            </div>

            <!-- HISTORY -->
            <div id="historySection" class="card hidden">
                <h3>Transaction History</h3>
                <p class="subtitle">Recent activity</p>
                <div id="historyList" style="margin-top:18px"></div>
            </div>

        </div>
    </div>

    <script>
        let balance = 45000;
        let history = [];
        const fee = 10;

        function updateBalanceUI() {
            balanceText.innerText = "â‚¹" + balance;
        }

        function hideAll() {
            dashboardSection.classList.add("hidden");
            sendMoneySection.classList.add("hidden");
            addMoneySection.classList.add("hidden");
            historySection.classList.add("hidden");
        }

        function showDashboard() {
            hideAll();
            dashboardSection.classList.remove("hidden");
            updateBalanceUI();
        }

        function showSendMoney() {
            hideAll();
            sendMoneySection.classList.remove("hidden");
        }

        function showAddMoney() {
            hideAll();
            addMoneySection.classList.remove("hidden");
        }

        function showHistory() {
            hideAll();
            historySection.classList.remove("hidden");
            updateHistoryUI();
        }

        /* SEND MONEY */
        function setAmt(v) { amount.value = v }

        function goStep2() {
            if (!fromAcc.value || !toAcc.value || !amount.value) {
                alert("Fill all details");
                return;
            }
            step1.classList.add("hidden");
            step2.classList.remove("hidden");
            s2.classList.add("active"); l2.classList.add("active");

            cFrom.innerText = fromAcc.value;
            cTo.innerText = toAcc.value;
            cAmt.innerText = "â‚¹" + amount.value;
            cTotal.innerText = "â‚¹" + (Number(amount.value) + fee);
        }

        function goStep3() {
            step2.classList.add("hidden");
            step3.classList.remove("hidden");
            s3.classList.add("active");

            balance -= Number(amount.value);
            updateBalanceUI();

            const id = "TXN" + Math.floor(Math.random() * 100000000);
            txnId.innerText = "Transaction ID: " + id;

            // record history
            history.unshift({
                type: 'send',
                from: fromAcc.value,
                to: toAcc.value,
                amount: Number(amount.value),
                fee: fee,
                total: Number(amount.value) + fee,
                id: id,
                date: new Date().toLocaleString()
            });
            updateHistoryUI();
        }

        /* ADD MONEY */
        function setAddAmt(v) { addAmount.value = v }

        function confirmAddMoney() {
            const amt = Number(addAmount.value);
            if (amt <= 0) { alert("Enter valid amount"); return; }

            balance += amt;
            updateBalanceUI();

            addForm.classList.add("hidden");
            addSuccess.classList.remove("hidden");
            const id = "ADD" + Math.floor(Math.random() * 100000000);
            addTxn.innerText = "Transaction ID: " + id;

            // record history
            history.unshift({
                type: 'add',
                amount: amt,
                id: id,
                date: new Date().toLocaleString()
            });
            updateHistoryUI();
        }

        function updateHistoryUI() {
            if (!historyList) return;
            if (history.length === 0) {
                historyList.innerHTML = '<div class="inner-card">No transactions yet.</div>';
                return;
            }
            let out = '';
            history.forEach(h => {
                if (h.type === 'send') {
                    out += `<div class="inner-card" style="margin-bottom:12px">
                        <div><strong>${h.id}</strong> â€” ${h.date}</div>
                        <div>From: ${h.from}</div>
                        <div>To: ${h.to}</div>
                        <div>Amount: â‚¹${h.amount} â€¢ Fee: â‚¹${h.fee} â€¢ Total: â‚¹${h.total}</div>
                    </div>`;
                } else if (h.type === 'add') {
                    out += `<div class="inner-card" style="margin-bottom:12px">
                        <div><strong>${h.id}</strong> â€” ${h.date}</div>
                        <div>Added: â‚¹${h.amount}</div>
                    </div>`;
                }
            });
            historyList.innerHTML = out;
        }
    </script>

</body>

</html>